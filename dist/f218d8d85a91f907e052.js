(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{101:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"works container"},[t._m(0),s("div",{staticClass:"work-add-wrapper"},[t.addModeOn?s("addWork",{ref:"addWorkCompLink",on:{showBlockAddWork:t.showBlockAddWork}}):t._e(),t.getEditModeState?s("editWork",{ref:"editWorkCompLink",attrs:{workToEdit:t.workToEdit}}):t._e()],1),s("ul",{staticClass:"works__list"},[t.addModeOn?t._e():s("li",{staticClass:"works__item works__item--add"},[s("label",{staticClass:"works__add-label"},[s("div",{staticClass:"works__add-visible"},[t._v("+")]),s("input",{staticClass:"works__add-input",attrs:{type:"button",disabled:t.getEditModeState},on:{click:t.showBlockAddWork}}),s("span",{staticClass:"works__add-exp"},[t._v("Добавить работу")])])]),t._l(t.works,function(e){return s("li",{key:e.id,staticClass:"works__item"},[s("worksList",{attrs:{work:e,addModeOn:t.addModeOn},on:{getCurrentWork:t.getCurrentWork,scrollToEdit:t.scrollToEdit}})],1)})],2)])};r._withStripped=!0;var a=s(40),o=s.n(a),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"addWorkComp",staticClass:"works-add"},[s("form",{staticClass:"works-add__form",on:{submit:function(e){return e.preventDefault(),t.createNewWork(e)}}},[s("div",{staticClass:"works-add__title"},[t._v("Добавление работы")]),s("div",{staticClass:"works-add__container"},[s("div",{staticClass:"works-add__coll"},[s("div",{staticClass:"works__drop-zone"},[s("label",{staticClass:"works__upload-img"},[s("span",{staticClass:"works__drop-exp"},[t._v(" Перетащите или загрузите изображение")]),s("div",{staticClass:"works__upload-btn"},[t._v("Загрузить")]),s("input",{staticClass:"works__upload",attrs:{type:"file"},on:{change:t.workFileChange}})])]),s("div",{staticClass:"works__img",style:{backgroundImage:"url("+t.rendererWorkPhoto+")"}})]),s("div",{staticClass:"works-add__coll works-add__coll--column"},[s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Название")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.title,expression:"newWorkData.title"}],staticClass:"work__name work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.title},on:{input:function(e){e.target.composing||t.$set(t.newWorkData,"title",e.target.value)}}})]),s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Ссылка")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.link,expression:"newWorkData.link"}],staticClass:"work__link work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.link},on:{input:function(e){e.target.composing||t.$set(t.newWorkData,"link",e.target.value)}}})]),s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Описание")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.desc,expression:"newWorkData.desc"}],staticClass:"work__textarea work__input",attrs:{type:"text",row:"3"},domProps:{value:t.newWorkData.desc},on:{input:function(e){e.target.composing||t.$set(t.newWorkData,"desc",e.target.value)}}})]),s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Добавление тега")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.techs,expression:"newWorkData.techs"}],staticClass:"work__tags work__input",attrs:{type:"text",placeholder:"Введите теги через запятую и пробел"},domProps:{value:t.newWorkData.techs},on:{input:[function(e){e.target.composing||t.$set(t.newWorkData,"techs",e.target.value)},t.watchTagsToArray]}})]),s("ul",{staticClass:"tags__list"},t._l(t.tags,function(e){return s("li",{staticClass:"tags__item"},[s("worksTag",{attrs:{tag:e},on:{deleteTag:t.deleteTag}})],1)}),0),s("div",{staticClass:"save-cancel__btns"},[s("button",{staticClass:"btn-cancel btn",attrs:{type:"button",disabled:t.getEditModeState},on:{click:function(e){return e.preventDefault(),t.$emit("showBlockAddWork")}}},[t._v("Отмена")]),s("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Сохранить")])])])])])])};n._withStripped=!0;var i=s(0),c=s.n(i),l=s(1),d=s.n(l),u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tags"},[s("p",{staticClass:"tags__text"},[t._v(t._s(t.tag))]),s("button",{staticClass:"close-cross",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("deleteTag",t.tag)}}},[t._v("+")])])};u._withStripped=!0;var k={props:{tag:String}},_=(s(90),s(6)),p=Object(_.a)(k,u,[],!1,null,null,null);p.options.__file="src/admin/components/worksTag.vue";var w=p.exports,v=s(69),h=s(41),m={components:{worksTag:w},data:function(){return{newWorkData:{title:"",link:"",desc:"",techs:[],photo:{}},rendererWorkPhoto:"",tags:[]}},computed:o()({},Object(h.b)("works",["getEditModeState"])),methods:o()({},Object(h.a)("works",["addWork"]),{scrollTo:function(){this.$refs.addWorkComp.scrollIntoView()},validForm:function(){for(var t in this.newWorkData)if(!this.newWorkData[t])return!1;return!!this.newWorkData.photo.name},workFileChange:function(t){var e=this;this.newWorkData.photo=t.target.files[0];var s=this.newWorkData.photo;Object(v.a)(s).then(function(t){e.rendererWorkPhoto=t})},createNewWork:function(){var t=this;return d()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validForm())try{t.addWork(t.newWorkData),t.newWorkData.title="",t.newWorkData.link="",t.newWorkData.desc="",t.newWorkData.techs="",t.newWorkData.photo=""}catch(t){console.log(t)}else alert("Поля формы должны быть заполнены");case 1:case"end":return e.stop()}},e)}))()},watchTagsToArray:function(){this.tags=this.newWorkData.techs.split(", ")},deleteTag:function(t){var e=parseInt(this.tags.indexOf(t));this.tags.splice(e,1),this.newWorkData.techs=this.tags.join(", ")}})},g=(s(91),Object(_.a)(m,n,[],!1,null,"4b75431c",null));g.options.__file="src/admin/components/addWork.vue";var f=g.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"works-wrap"},[s("div",{staticClass:"works__img"},[s("img",{staticClass:"works__img-icon",attrs:{src:t.baseURL+t.work.photo}})]),s("ul",{staticClass:"works__tags"},t._l(t.tags,function(e){return s("li",{staticClass:"tags__item"},[t._v(t._s(e))])}),0),s("h2",{staticClass:"works__title"},[t._v(" "+t._s(t.work.title))]),s("p",{staticClass:"works__desc"},[t._v(t._s(t.work.description))]),s("a",{staticClass:"works__link"},[t._v(" "+t._s(t.work.link))]),s("div",{staticClass:"edit-trash__btns"},[s("label",{staticClass:"btn-label"},[s("span",{staticClass:"btn-text"},[t._v("Править")]),s("button",{staticClass:"edit edit--blue",attrs:{type:"button",disabled:t.addModeOn||t.getEditModeState},on:{click:function(e){return e.preventDefault(),t.toggleEdit(e)}}})]),s("label",{staticClass:"btn-label"},[s("span",{staticClass:"btn-text"},[t._v("Удалить")]),s("button",{staticClass:"cross",attrs:{type:"button"},on:{click:t.removeCurrentWork}})])])])};C._withStripped=!0;var W=s(20),b={props:{work:Object,addModeOn:Boolean},data:function(){return{baseURL:"https://webdev-api.loftschool.com/",tags:[]}},created:function(){this.tags=this.work.techs.split(" ")},computed:o()({},Object(W.c)("works",["getEditModeState"])),methods:o()({},Object(W.b)("works",["removeWork","toggleEditMode"]),{removeCurrentWork:function(){var t=this;return d()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.removeWork(t.work);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))()},toggleEdit:function(){this.toggleEditMode(this.getEditModeState),this.$emit("getCurrentWork",this.work),this.$emit("scrollToEdit")}})},x=(s(92),Object(_.a)(b,C,[],!1,null,null,null));x.options.__file="src/admin/components/worksList.vue";var D=x.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"editWorkComp",staticClass:"works-edit"},[s("form",{staticClass:"works-add__form",on:{submit:function(e){return e.preventDefault(),t.editCurrentWork(e)}}},[s("div",{staticClass:"works-add__title"},[t._v("Редактирование работы")]),s("div",{staticClass:"works-add__container"},[s("div",{staticClass:"works-add__coll"},[s("div",{staticClass:"works__drop-zone"},[s("label",{staticClass:"works__upload-img"},[s("span",{staticClass:"works__drop-exp"},[t._v(" Перетащите или загрузите изображение")]),s("div",{staticClass:"works__upload-btn"},[t._v("Загрузить")]),s("input",{staticClass:"works__upload",attrs:{type:"file"},on:{change:t.workFileChange}})])]),s("div",{staticClass:"works__img",style:{backgroundImage:"url("+t.rendererWorkPhoto+")"}})]),s("div",{staticClass:"works-add__coll works-add__coll--column"},[s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Название")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentWork.title,expression:"currentWork.title"}],staticClass:"work__name work__input",attrs:{type:"text"},domProps:{value:t.currentWork.title},on:{input:function(e){e.target.composing||t.$set(t.currentWork,"title",e.target.value)}}})]),s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Ссылка")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentWork.link,expression:"currentWork.link"}],staticClass:"work__link work__input",attrs:{type:"text"},domProps:{value:t.currentWork.link},on:{input:function(e){e.target.composing||t.$set(t.currentWork,"link",e.target.value)}}})]),s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Описание")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentWork.description,expression:"currentWork.description"}],staticClass:"work__textarea work__input",attrs:{type:"text",row:"3"},domProps:{value:t.currentWork.description},on:{input:function(e){e.target.composing||t.$set(t.currentWork,"description",e.target.value)}}})]),s("label",{staticClass:"works-add__block"},[s("span",{staticClass:"work__input-title"},[t._v("Добавление тега")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.currentWork.techs,expression:"currentWork.techs"}],staticClass:"work__tags work__input",attrs:{type:"text"},domProps:{value:t.currentWork.techs},on:{input:function(e){e.target.composing||t.$set(t.currentWork,"techs",e.target.value)}}})]),s("ul",{staticClass:"tags__list"},t._l(t.tags,function(e){return s("li",{staticClass:"tags__item"},[s("worksTag",{attrs:{tag:e},on:{deleteTag:t.deleteTag}})],1)}),0),s("div",{staticClass:"save-cancel__btns"},[s("button",{staticClass:"btn-cancel btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.toggleEdit(e)}}},[t._v("Отмена")]),s("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Сохранить")])])])])])])};E._withStripped=!0;var T={components:{worksTag:w},data:function(){return{rendererWorkPhoto:"",tags:[],currentWork:{}}},props:{workToEdit:Object},created:function(){this.currentWork=this.workToEdit,this.tags=this.currentWork.techs.split(", ")},computed:o()({},Object(h.b)("works",["getEditModeState"])),methods:o()({},Object(h.a)("works",["editWork","toggleEditMode"]),{scrollTo:function(){this.$refs.editWorkComp.scrollIntoView()},toggleEdit:function(){this.toggleEditMode(this.getEditModeState)},addTag:function(){this.tags=this.currentWork.techs.split(", ")},deleteTag:function(t){var e=parseInt(this.tags.indexOf(t));this.tags.splice(e,1),this.currentWork.techs=this.tags.join(", ")},validForm:function(){for(var t in this.currentWork)if(!this.currentWork[t])return!1;return!0},workFileChange:function(){var t=this;this.currentWork.photo=event.target.files[0];var e=this.currentWork.photo;Object(v.a)(e).then(function(e){t.rendererWorkPhoto=e})},editCurrentWork:function(){var t=this;return d()(c.a.mark(function e(){var s,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.validForm()){e.next=19;break}return(s=new FormData).set("title",t.currentWork.title),s.set("techs",t.currentWork.techs),s.set("link",t.currentWork.link),s.set("description",t.currentWork.description),t.currentWork.photo.name&&s.set("photo",t.currentWork.photo),r={id:t.currentWork.id,data:s},e.prev=8,e.next=11,t.editWork(r);case 11:t.toggleEditMode(t.getEditModeState),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:e.next=20;break;case 19:alert("Все поля формы должны быть заполнены");case 20:case"end":return e.stop()}},e,null,[[8,14]])}))()}})},O=(s(93),Object(_.a)(T,E,[],!1,null,"5c8a8e6a",null));O.options.__file="src/admin/components/editWork.vue";var M={components:{addWork:f,worksList:D,editWork:O.exports},data:function(){return{addModeOn:!1,workToEdit:{}}},computed:o()({},Object(h.b)("works",["getEditModeState"]),Object(h.c)("works",{works:function(t){return t.works}})),created:function(){this.fetchWorks()},methods:o()({},Object(h.a)("works",["fetchWorks"]),{showBlockAddWork:function(){this.addModeOn=!this.addModeOn,this.addModeOn&&scroll()},getCurrentWork:function(t){this.workToEdit=this.works.find(function(e){return e.id===t.id})},scroll:function(){this.$refs.addWorkCompLink.scrollTo()},scrollToEdit:function(){this.$refs.editWorkCompLink.scrollTo()}})},y=(s(94),Object(_.a)(M,r,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"block-title"},[e("div",{staticClass:"title"},[e("h1",[this._v('Блок "Работы" ')])])])}],!1,null,null,null));y.options.__file="src/admin/components/works.vue";e.default=y.exports},69:function(t,e,s){"use strict";s.d(e,"a",function(){return r});s(5);var r=function(t){var e=new FileReader;return new Promise(function(s,r){try{e.readAsDataURL(t),e.onloadend=function(){s(e.result)}}catch(t){throw new Error("Ошибка при чтении файла")}})}},75:function(t,e,s){},76:function(t,e,s){},77:function(t,e,s){},78:function(t,e,s){},79:function(t,e,s){},90:function(t,e,s){"use strict";var r=s(75);s.n(r).a},91:function(t,e,s){"use strict";var r=s(76);s.n(r).a},92:function(t,e,s){"use strict";var r=s(77);s.n(r).a},93:function(t,e,s){"use strict";var r=s(78);s.n(r).a},94:function(t,e,s){"use strict";var r=s(79);s.n(r).a}}]);