(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{69:function(t,s,a){"use strict";a.d(s,"a",function(){return e});a(5);var e=function(t){var s=new FileReader;return new Promise(function(a,e){try{s.readAsDataURL(t),s.onloadend=function(){a(s.result)}}catch(t){throw new Error("Ошибка при чтении файла")}})}},75:function(t,s,a){},76:function(t,s,a){},77:function(t,s,a){},78:function(t,s,a){},88:function(t,s,a){"use strict";var e=a(75);a.n(e).a},89:function(t,s,a){"use strict";var e=a(76);a.n(e).a},90:function(t,s,a){"use strict";var e=a(77);a.n(e).a},91:function(t,s,a){"use strict";var e=a(78);a.n(e).a},97:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"works container"},[t._m(0),a("div",{staticClass:"work-add-wrapper"},[t.blockAddWorksIsActive?a("addWork",{on:{showBlockAddWorks:t.showBlockAddWorks}}):t._e(),t.editModeOn?a("editWork"):t._e()],1),a("ul",{staticClass:"works__list"},[t.blockAddWorksIsActive?t._e():a("li",{staticClass:"works__item works__item--add"},[a("label",{staticClass:"works__add-label"},[a("div",{staticClass:"works__add-visible"},[t._v("+")]),a("input",{staticClass:"works__add-input",attrs:{type:"button"},on:{click:t.showBlockAddWorks}}),a("span",{staticClass:"works__add-exp"},[t._v("Добавить работу")])])]),t._l(t.works,function(t){return a("li",{key:t.id,staticClass:"works__item"},[a("worksList",{attrs:{work:t}})],1)})],2)])};e._withStripped=!0;var o=a(40),r=a.n(o),n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"works-add"},[a("form",{staticClass:"works-add__form",on:{submit:function(s){return s.preventDefault(),t.createNewWork(s)}}},[a("div",{staticClass:"works-add__title"},[t._v("Добавление работы")]),a("div",{staticClass:"works-add__container"},[a("div",{staticClass:"works-add__coll"},[a("div",{staticClass:"works__drop-zone"},[a("label",{staticClass:"works__upload-img"},[a("span",{staticClass:"works__drop-exp"},[t._v(" Перетащите или загрузите изображение")]),a("div",{staticClass:"works__upload-btn"},[t._v("Загрузить")]),a("input",{staticClass:"works__upload",attrs:{type:"file"},on:{change:t.workFileChange}})])]),a("div",{staticClass:"works__img",style:{backgroundImage:"url("+t.rendererWorkPhoto+")"}})]),a("div",{staticClass:"works-add__coll works-add__coll--column"},[a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.title,expression:"newWorkData.title"}],staticClass:"work__name work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.title},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"title",s.target.value)}}})]),a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Ссылка")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.link,expression:"newWorkData.link"}],staticClass:"work__link work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.link},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"link",s.target.value)}}})]),a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Описание")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.desc,expression:"newWorkData.desc"}],staticClass:"work__textarea work__input",attrs:{type:"text",row:"3"},domProps:{value:t.newWorkData.desc},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"desc",s.target.value)}}})]),a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Добавление тега")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.techs,expression:"newWorkData.techs"}],staticClass:"work__tags work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.techs},on:{input:[function(s){s.target.composing||t.$set(t.newWorkData,"techs",s.target.value)},t.watchTagsToArray]}})]),a("ul",{staticClass:"tags__list"},t._l(t.tags,function(s){return a("li",{staticClass:"tags__item"},[a("worksTag",{attrs:{tag:s},on:{deleteTag:t.deleteTag}})],1)}),0),a("div",{staticClass:"save-cancel__btns"},[a("button",{staticClass:"btn-cancel btn",attrs:{type:"button",disabled:t.getEditModeState},on:{click:function(s){return s.preventDefault(),t.$emit("showBlockAddWorks")}}},[t._v("Отмена")]),a("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Сохранить")])])])])])])};n._withStripped=!0;var i=a(0),l=a.n(i),c=a(2),d=a.n(c),_=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tags"},[a("p",{staticClass:"tags__text"},[t._v(t._s(t.tag))]),a("button",{staticClass:"close-cross",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.$emit("deleteTag",t.tag)}}},[t._v("+")])])};_._withStripped=!0;var k={props:{tag:String}},u=(a(88),a(6)),w=Object(u.a)(k,_,[],!1,null,null,null);w.options.__file="src/admin/components/worksTag.vue";var p=w.exports,v=a(69),m=a(41),C={components:{worksTag:p},data:function(){return{newWorkData:{title:"",link:"",desc:"",techs:[],photo:{}},rendererWorkPhoto:"",tags:[]}},computed:r()({},Object(m.b)("works",["getEditModeState"])),methods:r()({},Object(m.a)("works",["addWork"]),{validForm:function(){for(var t in this.newWorkData)if(!this.newWorkData[t])return!1;return!!this.newWorkData.photo.name},workFileChange:function(t){var s=this;this.newWorkData.photo=t.target.files[0];var a=this.newWorkData.photo;Object(v.a)(a).then(function(t){s.rendererWorkPhoto=t})},createNewWork:function(){var t=this;return d()(l.a.mark(function s(){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.validForm())try{t.addWork(t.newWorkData),t.newWorkData.title="",t.newWorkData.link="",t.newWorkData.desc="",t.newWorkData.techs="",t.newWorkData.photo=""}catch(t){console.log(t)}else alert("Поля формы не заполнены");case 1:case"end":return s.stop()}},s)}))()},watchTagsToArray:function(){this.tags=this.newWorkData.techs.split(", ")},deleteTag:function(t){var s=parseInt(this.tags.indexOf(t));this.tags.splice(s,1),this.newWorkData.techs=this.tags.join(", ")}})},f=(a(89),Object(u.a)(C,n,[],!1,null,"4b75431c",null));f.options.__file="src/admin/components/addWork.vue";var b=f.exports,h=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"works-wrap"},[a("div",{staticClass:"works__img"},[a("img",{staticClass:"works__img-icon",attrs:{src:t.baseURL+t.work.photo}})]),a("ul",{staticClass:"works__tags"},[a("li",{staticClass:"tags__item"},[t._v(t._s(t.work.techs))])]),a("h2",{staticClass:"works__title"},[t._v(" "+t._s(t.work.title))]),a("p",{staticClass:"works__desc"},[t._v(t._s(t.work.description))]),a("a",{staticClass:"works__link"},[t._v(" "+t._s(t.work.link))]),a("div",{staticClass:"edit-trash__btns"},[a("label",{staticClass:"btn-label"},[a("span",{staticClass:"btn-text"},[t._v("Править")]),a("button",{staticClass:"edit edit--blue",attrs:{type:"button"},on:{click:function(s){s.preventDefault(),t.editModeOn=!0}}})]),a("label",{staticClass:"btn-label"},[a("span",{staticClass:"btn-text"},[t._v("Удалить")]),a("button",{staticClass:"cross",attrs:{type:"button"},on:{click:t.removeCurrentWork}})])])])};h._withStripped=!0;var g=a(20),W={components:{},data:function(){return{baseURL:"https://webdev-api.loftschool.com/"}},props:{work:Object},computed:r()({},Object(g.c)("works",["editModeOn"])),methods:r()({},Object(g.b)("works",["removeWork"]),{removeCurrentWork:function(){var t=this;return d()(l.a.mark(function s(){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.removeWork(t.work);case 3:s.next=8;break;case 5:s.prev=5,s.t0=s.catch(0),console.log(s.t0);case 8:case"end":return s.stop()}},s,null,[[0,5]])}))()}})},D=(a(90),Object(u.a)(W,h,[],!1,null,null,null));D.options.__file="src/admin/components/worksList.vue";var x=D.exports,y=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"works-edit"},[a("form",{staticClass:"works-add__form",on:{submit:function(s){return s.preventDefault(),t.editCurrentWork(s)}}},[a("div",{staticClass:"works-add__title"},[t._v("Добавление работы")]),a("div",{staticClass:"works-add__container"},[a("div",{staticClass:"works-add__coll"},[a("div",{staticClass:"works__drop-zone"},[a("label",{staticClass:"works__upload-img"},[a("span",{staticClass:"works__drop-exp"},[t._v(" Перетащите или загрузите изображение")]),a("div",{staticClass:"works__upload-btn"},[t._v("Загрузить")]),a("input",{staticClass:"works__upload",attrs:{type:"file"},on:{change:t.workFileChange}})])]),a("div",{staticClass:"works__img",style:{backgroundImage:"url("+t.rendererWorkPhoto+")"}})]),a("div",{staticClass:"works-add__coll works-add__coll--column"},[a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.title,expression:"newWorkData.title"}],staticClass:"work__name work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.title},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"title",s.target.value)}}})]),a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Ссылка")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.link,expression:"newWorkData.link"}],staticClass:"work__link work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.link},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"link",s.target.value)}}})]),a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Описание")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.desc,expression:"newWorkData.desc"}],staticClass:"work__textarea work__input",attrs:{type:"text",row:"3"},domProps:{value:t.newWorkData.desc},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"desc",s.target.value)}}})]),a("label",{staticClass:"works-add__block"},[a("span",{staticClass:"work__input-title"},[t._v("Добавление тега")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newWorkData.tags,expression:"newWorkData.tags"}],staticClass:"work__tags work__input",attrs:{type:"text"},domProps:{value:t.newWorkData.tags},on:{input:function(s){s.target.composing||t.$set(t.newWorkData,"tags",s.target.value)}}})]),t._m(0),t._m(1)])])])])};y._withStripped=!0;var O={},A=Object(u.a)(O,y,[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"tags__list"},[s("li",{staticClass:"tags__item"},[this._v("Test"),s("span",{staticClass:"close-cross"},[this._v("+")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"save-cancel__btns"},[s("button",{staticClass:"btn-cancel btn",attrs:{type:"button"}},[this._v("Отмена")]),s("button",{staticClass:"btn",attrs:{type:"submit"}},[this._v("Сохранить")])])}],!1,null,null,null);A.options.__file="src/admin/components/editWork.vue";var $={components:{addWork:b,worksList:x,editWork:A.exports},data:function(){return{blockAddWorksIsActive:!1,editModeOn:!1}},computed:r()({},Object(m.b)("works",["getEditModeState"]),Object(m.c)("works",{works:function(t){return t.works}})),created:function(){this.fetchWorks()},methods:r()({},Object(m.a)("works",["fetchWorks"]),{showBlockAddWorks:function(){this.blockAddWorksIsActive=!this.blockAddWorksIsActive},getCurrentWork:function(t){this.workToEdit=this.works.find(function(s){return s.id===t.id})}})},j=(a(91),Object(u.a)($,e,[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"block-title"},[s("div",{staticClass:"title"},[s("h1",[this._v('Блок "Работы" ')])])])}],!1,null,null,null));j.options.__file="src/admin/components/works.vue";s.default=j.exports}}]);